<html><head>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
   crossorigin=""/>
   <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
   integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
   crossorigin=""></script>
   <script src="/Users/matthew/Downloads/nycounties.json"></script>
</head><body>

   <div id="map" style="height: 100%"></div>
   <script src="cases.json"></script>
   <script language="javascript">
   var map = L.map('map').setView([43, -76], 7);
   L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);
var i;
for (i = 0; i < counties.features.length; i++)
{
	
	var properties = generateProperties(counties.features[i].properties.NAME);
	var theStyle = {"color" : properties.color, "weight" : 0};
	var marker = L.geoJSON(counties.features[i], {style: theStyle});
	marker.bindPopup(properties.popupContent);
	marker.on("mouseover", function(e){
			this.openPopup();
	});	
	
	marker.addTo(map)
	
}
function generateText(countyName)
{
	var i = 0;
	for (i = 0; i < countycases.counties.length; i++)
	{
		if (countyName == countycases.counties[i].name)
		{
			return countyName + ": " + countycases.counties[i].cases + " cases";
		}
	}
	return countyName;
}
function generateProperties(countyName)
{
	var popupContent = countyName + " County: no cases";
	var color = "#00ff00";
	var i = 0;
	for (i = 0; i < countycases.counties.length; i++)
	{
		
		if (countyName == countycases.counties[i].name || isBigApple(countyName))
		{
			popupContent = countyName + " County: " + countycases.counties[i].cases + " case";
			//make plurl if needed
			if (countycases.counties[i].cases > 1)
			{
				popupContent = popupContent + "s";
			}
			if (isBigApple(countyName))
			{
				popupContent = "NYC: " + countycases.counties[i].cases + " cases";
			}
			if (countycases.counties[i].cases > 0 && countycases.counties[i].cases <= 5)
			{
				color = "#ffe100";
			}
			if (countycases.counties[i].cases > 5 && countycases.counties[i].cases <= 10)
			{
				color = "#ffdd00";
			}
			if (countycases.counties[i].cases > 10 && countycases.counties[i].cases <= 15)
			{
				color = "#ff9500";
			}
			if (countycases.counties[i].cases > 15 && countycases.counties[i].cases <= 20)
			{
				color = "#ff6a00";
			}
			if (countycases.counties[i].cases > 20 && countycases.counties[i].cases <= 50)
			{
				color = "#ff5100";
			}
			if (countycases.counties[i].cases > 50 && countycases.counties[i].cases <= 100)
			{
				color = "#ff3300";
			}
			if (countycases.counties[i].cases > 100 && countycases.counties[i].cases <= 500)
			{
				color = "#ff2200";
			}
			if (countycases.counties[i].cases > 500)
			{
				color = "#ff0000";
			}
		}
		
	}
	return {"color" : color, "popupContent": popupContent};
}
function isBigApple(countyName)
{
	if (countyName == "New York" || countyName == "Queens" || countyName == "Kings" || countyName == "Bronx" || countyName == "Richmond")
	{
		return true;
	}
	return false;
}
</script>
   </body>
